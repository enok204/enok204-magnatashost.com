<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Magnata Host - Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: { sans: ['Inter', 'sans-serif'] },
          colors: {
            'spotify-green': '#1DB954',
            'bg-gradient': '#0f0f23',
            'purple-glow': '#a855f7',
          },
          animation: {
            'float': 'float 6s ease-in-out infinite',
            'pulse-glow': 'pulse-glow 2s ease-in-out infinite',
            'gradient': 'gradient 20s ease infinite',
            'spin-slow': 'spin 8s linear infinite',
          },
          keyframes: {
            float: {
              '0%, 100%': { transform: 'translateY(0px)' },
              '50%': { transform: 'translateY(-20px)' }
            },
            'pulse-glow': {
              '0%, 100%': { boxShadow: '0 0 20px rgba(168, 85, 247, 0.4)' },
              '50%': { boxShadow: '0 0 40px rgba(168, 85, 247, 0.8)' }
            },
            gradient: {
              '0%, 100%': { backgroundPosition: '0% 50%' },
              '50%': { backgroundPosition: '100% 50%' }
            }
          }
        }
      }
    }
  </script>
  <style>
    .glass {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 1.5rem;
    }
    .glass-card {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      transition: all 0.3s ease;
    }
    .glass-card:hover {
      background: rgba(255, 255, 255, 0.1);
      transform: translateY(-4px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    }
    .bg-animated {
      background: linear-gradient(-45deg, #0f0f23, #1a1a2e, #16213e, #0f3460);
      background-size: 400% 400%;
      animation: gradient 20s ease infinite;
    }
    .hover-glow:hover {
      box-shadow: 0 0 30px rgba(168, 85, 247, 0.6);
    }
    .tab-btn {
      @apply px-6 py-3 rounded-xl font-semibold transition-all duration-300;
    }
    .tab-btn.active {
      @apply bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg hover-glow;
    }
    .tab-btn:not(.active) {
      @apply text-gray-400 hover:text-white hover:bg-white/10;
    }
    #particles {
      position: fixed;
      inset: 0;
      z-index: -1;
      pointer-events: none;
    }
    .progress-fill {
      background: linear-gradient(90deg, #1DB954, #1ed760);
      transition: width 0.1s linear;
    }
    .volume-fill {
      background: linear-gradient(90deg, #fff, #b3b3b3);
      transition: width 0.2s ease;
    }
    .volume-thumb {
      @apply absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-white rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity;
    }
    .log-entry { animation: fadeIn 0.5s ease; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
  </style>
</head>
<body class="bg-animated text-white min-h-screen overflow-x-hidden font-sans">

  <!-- Partículas -->
  <canvas id="particles"></canvas>

  <!-- YouTube Player -->
  <div id="youtube-player" class="fixed inset-0 opacity-0 pointer-events-none"></div>

  <!-- TELA DE AUTENTICAÇÃO -->
  <div id="auth-container" class="min-h-screen flex items-center justify-center p-6">
    <div class="glass p-8 rounded-3xl shadow-2xl max-w-md w-full border border-white/20">
      <div class="flex mb-8 border-b border-white/10">
        <button id="tab-login" class="flex-1 py-3 text-center font-bold text-purple-400 border-b-2 border-purple-400">Login</button>
        <button id="tab-register" class="flex-1 py-3 text-center font-bold text-gray-400">Registro</button>
      </div>

      <!-- LOGIN -->
      <form id="login-form" class="space-y-6">
        <input type="text" id="login-username" placeholder="Usuário" class="w-full px-4 py-3 glass rounded-xl border border-white/20 focus:border-purple-500 focus:outline-none" required>
        <input type="password" id="login-password" placeholder="Senha" class="w-full px-4 py-3 glass rounded-xl border border-white/20 focus:border-purple-500 focus:outline-none" required>
        <button type="submit" class="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold py-3 rounded-xl hover:scale-105 transition transform hover-glow">
          Entrar
        </button>
      </form>

      <!-- REGISTRO -->
      <form id="register-form" class="space-y-6 hidden">
        <input type="text" id="reg-username" placeholder="Usuário" class="w-full px-4 py-3 glass rounded-xl border border-white/20 focus:border-purple-500 focus:outline-none" required>
        <input type="email" id="reg-email" placeholder="E-mail" class="w-full px-4 py-3 glass rounded-xl border border-white/20 focus:border-purple-500 focus:outline-none" required>
        <input type="password" id="reg-password" placeholder="Senha (mín. 6)" class="w-full px-4 py-3 glass rounded-xl border border-white/20 focus:border-purple-500 focus:outline-none" required minlength="6">
        <input type="password" id="reg-confirm" placeholder="Confirmar senha" class="w-full px-4 py-3 glass rounded-xl border border-white/20 focus:border-purple-500 focus:outline-none" required>
        <button type="submit" class="w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold py-3 rounded-xl hover:scale-105 transition transform hover-glow">
          Criar Conta
        </button>
      </form>
    </div>
  </div>

  <!-- DASHBOARD (OCULTO) -->
  <div id="dashboard" class="hidden min-h-screen pb-24">
    <header class="glass border-b border-white/10 backdrop-blur-xl sticky top-0 z-40">
      <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
        <div class="flex items-center gap-4">
          <div class="w-10 h-10 bg-gradient-to-br from-purple-600 to-pink-600 rounded-xl flex items-center justify-center animate-spin-slow">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
            </svg>
          </div>
          <div>
            <h1 class="text-2xl font-black bg-gradient-to-r from-purple-400 via-pink-400 to-purple-400 bg-clip-text text-transparent">
              Magnata Host
            </h1>
            <p class="text-xs text-gray-400">Dashboard Profissional</p>
          </div>
        </div>
        <div id="user-info" class="flex items-center gap-3"></div>
      </div>
    </header>

    <main class="max-w-7xl mx-auto px-6 py-8">
      <div class="glass p-2 mb-8 shadow-xl">
        <div class="flex gap-2 flex-wrap" id="nav-tabs">
          <button onclick="showTab('overview')" class="tab-btn active" data-tab="overview">Visão Geral</button>
          <button onclick="showTab('bots')" class="tab-btn" data-tab="bots">Meus Bots</button>
          <button onclick="showTab('logs')" class="tab-btn" data-tab="logs">Logs</button>
          <button onclick="showTab('settings')" class="tab-btn" data-tab="settings">Configurações</button>
        </div>
      </div>

      <!-- VISÃO GERAL -->
      <div id="overview-tab" class="tab-content">
        <div class="glass-card p-8 rounded-2xl animate-float mb-8">
          <div class="flex flex-col md:flex-row items-center gap-6">
            <div id="user-avatar" class="w-24 h-24 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full flex items-center justify-center shadow-2xl animate-pulse-glow">
              <span class="text-4xl">Olá</span>
            </div>
            <div class="text-center md:text-left flex-1">
              <h2 class="text-4xl font-black mb-2 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent" id="welcome-message">Bem-vindo!</h2>
              <p class="text-lg text-gray-300 mb-1" id="user-email">Carregando...</p>
              <p class="text-sm text-gray-400">Gerencie seus bots com estilo e poder</p>
            </div>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
          <div class="glass-card p-6 text-center hover-glow">
            <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl mx-auto mb-4 flex items-center justify-center shadow-lg">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
            </div>
            <h3 class="text-3xl font-bold text-green-400" id="uptime">98.9%</h3>
            <p class="text-gray-400">Uptime Médio</p>
          </div>
          <div class="glass-card p-6 text-center hover-glow">
            <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-2xl mx-auto mb-4 flex items-center justify-center shadow-lg">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
            </div>
            <h3 class="text-3xl font-bold text-blue-400" id="bots-count">0</h3>
            <p class="text-gray-400">Bots Ativos</p>
          </div>
          <div class="glass-card p-6 text-center hover-glow">
            <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl mx-auto mb-4 flex items-center justify-center shadow-lg">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
            </div>
            <h3 class="text-3xl font-bold text-purple-400">0.02s</h3>
            <p class="text-gray-400">Latência</p>
          </div>
        </div>
      </div>

      <!-- BOTS -->
      <div id="bots-tab" class="tab-content hidden">
        <div class="glass-card p-6 mb-6">
          <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">Meus Bots</h2>
            <button onclick="showCreateBotModal()" class="bg-gradient-to-r from-green-500 to-emerald-600 hover-glow text-white px-6 py-3 rounded-xl font-bold shadow-lg hover:scale-105 transition-all flex items-center gap-2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/></svg>
              Novo Bot
            </button>
          </div>
          <div id="bots-list" class="space-y-4"></div>
        </div>
      </div>

      <!-- LOGS -->
      <div id="logs-tab" class="tab-content hidden">
        <div class="glass-card p-6">
          <h2 class="text-2xl font-bold mb-6">Logs do Sistema</h2>
          <div id="logs-container" class="bg-black/40 rounded-xl p-4 font-mono text-sm text-green-400 max-h-96 overflow-y-auto"></div>
        </div>
      </div>

      <!-- CONFIGURAÇÕES -->
      <div id="settings-tab" class="tab-content hidden">
        <div class="glass-card p-6">
          <h2 class="text-2xl font-bold mb-6">Configurações</h2>
          <div class="space-y-6">
            <div class="p-4 bg-white/5 rounded-xl">
              <label class="flex items-center justify-between cursor-pointer">
                <span>Notificações por email</span>
                <input type="checkbox" id="notif-email" class="w-6 h-6 accent-purple-600" checked>
              </label>
            </div>
            <button onclick="logout()" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-xl hover:scale-105 transition transform">
              Sair da Conta
            </button>
          </div>
        </div>
      </div>
    </main>

    <!-- MINI PLAYER -->
    <div id="music-player" class="fixed bottom-0 left-0 right-0 z-50">
      <div class="glass border-t border-white/10 backdrop-blur-xl">
        <div class="flex items-center justify-between px-4 py-3 max-w-screen-xl mx-auto h-20">
          <div class="flex items-center gap-3 flex-1 min-w-0">
            <div id="album-art" class="w-14 h-14 bg-gradient-to-br from-purple-600 to-pink-600 rounded-xl shadow-lg overflow-hidden border border-white/20">
              <img src="https://i.ytimg.com/vi/aToTwqMDlfU/maxresdefault.jpg" class="w-full h-full object-cover" onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=\"w-full h-full bg-gradient-to-br from-purple-600 to-pink-600\"></div>'">
            </div>
            <div class="min-w-0 flex-1">
              <p id="song-title" class="text-white font-bold text-sm text-ellipsis">All On You</p>
              <p id="song-artist" class="text-gray-400 text-xs text-ellipsis">Jacquees • Trey Songz</p>
            </div>
          </div>
          <div class="flex flex-col items-center gap-1 flex-1 max-w-md">
            <div class="flex items-center gap-4">
              <button id="prev-btn" class="text-gray-300 hover:text-white p-1 transition"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M8.445 14.832A1 1 0 0010 14v-2.798l5.445 3.63A1 1 0 0017 14V6a1 1 0 00-1.555-.832L10 8.798V6a1 1 0 00-1.555-.832l-6 4a1 1 0 000 1.664l6 4z"/></svg></button>
              <button id="play-pause-btn" class="bg-white text-black rounded-full p-2 hover:scale-110 transition transform hover-glow">
                <svg id="play-icon" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M8 5v10l8-5-8-5z"/></svg>
                <svg id="pause-icon" class="w-5 h-5 hidden" fill="currentColor" viewBox="0 0 20 20"><path d="M6 4h4v12H6V4zM10 4h4v12h-4V4z"/></svg>
              </button>
              <button id="next-btn" class="text-gray-300 hover:text-white p-1 transition"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M4.555 5.168A1 1 0 003 6v8a1 1 0 001.555.832L10 11.202V14a1 1 0 001.555.832l6-4a1 1 0 000-1.664l-6-4A1 1 0 0010 6v2.798l-5.445-3.63z"/></svg></button>
            </div>
            <div class="flex items-center gap-2 w-full px-2">
              <span id="current-time" class="text-xs text-gray-400 font-mono w-10 text-right">0:00</span>
              <div id="progress-container" class="flex-1 h-1 bg-white/20 rounded-full cursor-pointer group relative">
                <div id="progress-fill" class="progress-fill h-full rounded-full w-0"></div>
              </div>
              <span id="duration" class="text-xs text-gray-400 font-mono w-10">0:00</span>
            </div>
          </div>
          <div class="flex items-center gap-2 flex-1 justify-end">
            <button id="volume-btn" class="text-gray-400 hover:text-white p-1 transition">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.816L4.414 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.414l4.769-3.816a1 1 0 011.2 0zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 9.586a1 1 0 01-2 0 8 8 0 00-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 9.586a1 1 0 01-2 0 4 4 0 00-.636-2.293a1 1 0 010-1.414z"/></svg>
            </button>
            <div id="volume-container" class="w-24 h-1 bg-white/20 rounded-full cursor-pointer group relative">
              <div id="volume-fill" class="volume-fill h-full rounded-full w-full"></div>
              <div class="volume-thumb" style="left: 70%"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    let player, isPlaying = false, currentVolume = 70, userInteracted = false;
    let currentUser = null;
    let bots = JSON.parse(localStorage.getItem('magnata-bots') || '[]');
    let logs = JSON.parse(localStorage.getItem('magnata-logs') || '[]');

    // === AUTENTICAÇÃO ===
    const tabLogin = document.getElementById('tab-login');
    const tabRegister = document.getElementById('tab-register');
    const loginForm = document.getElementById('login-form');
    const registerForm = document.getElementById('register-form');

    tabLogin.onclick = () => { tabLogin.classList.replace('text-gray-400', 'text-purple-400'); tabRegister.classList.replace('text-purple-400', 'text-gray-400'); loginForm.classList.remove('hidden'); registerForm.classList.add('hidden'); };
    tabRegister.onclick = () => { tabRegister.classList.replace('text-gray-400', 'text-purple-400'); tabLogin.classList.replace('text-purple-400', 'text-gray-400'); registerForm.classList.remove('hidden'); loginForm.classList.add('hidden'); };

    registerForm.onsubmit = (e) => {
      e.preventDefault();
      const username = document.getElementById('reg-username').value.trim();
      const email = document.getElementById('reg-email').value.trim();
      const password = document.getElementById('reg-password').value;
      const confirm = document.getElementById('reg-confirm').value;

      if (password !== confirm) return alert('Senhas não coincidem!');
      if (password.length < 6) return alert('Senha muito curta!');

      const users = JSON.parse(localStorage.getItem('magnata-users') || '[]');
      if (users.some(u => u.username === username)) return alert('Usuário já existe!');

      users.push({ username, email, password });
      localStorage.setItem('magnata-users', JSON.stringify(users));
      alert('Cadastro realizado!');
      tabLogin.click();
    };

    loginForm.onsubmit = (e) => {
      e.preventDefault();
      const username = document.getElementById('login-username').value.trim();
      const password = document.getElementById('login-password').value;

      const users = JSON.parse(localStorage.getItem('magnata-users') || '[]');
      const user = users.find(u => u.username === username && u.password === password);

      if (user) {
        currentUser = user;
        localStorage.setItem('magnata-loggedin', 'true');
        localStorage.setItem('magnata-currentuser', JSON.stringify(user));
        initDashboard();
      } else {
        alert('Usuário ou senha incorretos!');
      }
    };

    function logout() {
      localStorage.removeItem('magnata-loggedin');
      localStorage.removeItem('magnata-currentuser');
      document.getElementById('dashboard').classList.add('hidden');
      document.getElementById('auth-container').classList.remove('hidden');
      if (player) player.pauseVideo();
    }

    // === DASHBOARD ===
    function initDashboard() {
      document.getElementById('auth-container').classList.add('hidden');
      document.getElementById('dashboard').classList.remove('hidden');

      const user = JSON.parse(localStorage.getItem('magnata-currentuser'));
      document.getElementById('welcome-message').innerHTML = `Bem-vindo, <span class="bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">${user.username}</span>!`;
      document.getElementById('user-email').textContent = user.email;
      document.getElementById('user-avatar').innerHTML = `<div class="w-full h-full bg-gradient-to-br from-purple-600 to-pink-600 rounded-full animate-pulse-glow"></div>`;
      document.getElementById('user-info').innerHTML = `
        <div class="flex items-center gap-3 bg-white/10 px-4 py-2 rounded-xl">
          <div class="w-8 h-8 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full"></div>
          <span class="font-medium">${user.username}</span>
          <button onclick="logout()" class="text-red-400 hover:text-red-300 text-sm">Sair</button>
        </div>
      `;

      updateStats();
      showTab('overview');
      initAudio();
    }

    function updateStats() {
      const running = bots.filter(b => b.status === 'running').length;
      document.getElementById('bots-count').textContent = running;
    }

    // === ABAS ===
    function showTab(tab) {
      document.querySelectorAll('.tab-content').forEach(t => t.classList.add('hidden'));
      document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active', 'bg-gradient-to-r', 'from-purple-600', 'to-pink-600', 'text-white', 'shadow-lg'));
      document.getElementById(tab + '-tab').classList.remove('hidden');
      const btn = document.querySelector(`[data-tab="${tab}"]`);
      btn.classList.add('active', 'bg-gradient-to-r', 'from-purple-600', 'to-pink-600', 'text-white', 'shadow-lg');

      if (tab === 'bots') loadBots();
      if (tab === 'logs') loadLogs();
    }

    // === BOTS ===
    function showCreateBotModal() {
      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 bg-black/50 flex items-center justify-center z-50';
      modal.innerHTML = `
        <div class="glass p-6 rounded-2xl w-full max-w-md mx-4">
          <h3 class="text-xl font-bold mb-4">Criar Bot</h3>
          <input type="text" id="bot-name" placeholder="Nome do Bot" class="w-full px-4 py-3 glass rounded-xl mb-3">
          <input type="text" id="bot-token" placeholder="Token (opcional)" class="w-full px-4 py-3 glass rounded-xl mb-4">
          <div class="flex gap-3">
            <button onclick="this.closest('.fixed').remove()" class="flex-1 bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded-lg">Cancelar</button>
            <button onclick="createBot()" class="flex-1 bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg">Criar</button>
          </div>
        </div>
      `;
      document.body.appendChild(modal);
    }

    window.createBot = () => {
      const name = document.getElementById('bot-name').value.trim();
      if (!name) return alert('Nome obrigatório!');
      const id = Date.now();
      const bot = { id, name, status: 'stopped', uptime: 0, logs: [], created: new Date().toLocaleString() };
      bots.push(bot);
      localStorage.setItem('magnata-bots', JSON.stringify(bots));
      addLog(`Bot "${name}" criado.`);
      document.querySelector('.fixed')?.remove();
      loadBots();
    };

    function loadBots() {
      const list = document.getElementById('bots-list');
      list.innerHTML = '';
      if (bots.length === 0) {
        list.innerHTML = `<p class="text-center text-gray-400 py-8">Nenhum bot. Crie o primeiro!</p>`;
        return;
      }
      bots.forEach(bot => {
        const card = document.createElement('div');
        card.className = 'glass-card p-6 rounded-xl';
        const status = bot.status === 'running' ? 'bg-green-600/20 text-green-400' : 'bg-red-600/20 text-red-400';
        card.innerHTML = `
          <div class="flex justify-between items-center mb-4">
            <div class="flex items-center gap-3">
              <div class="w-12 h-12 bg-gradient-to-br from-purple-600 to-pink-600 rounded-xl flex items-center justify-center text-xl font-bold">${name[0]}</div>
              <div>
                <h3 class="font-bold">${bot.name}</h3>
                <p class="text-xs text-gray-400">ID: ${bot.id}</p>
              </div>
            </div>
            <span class="px-3 py-1 rounded-full text-xs ${status}">${bot.status === 'running' ? 'Online' : 'Parado'}</span>
          </div>
          <div class="flex gap-2">
            <button onclick="toggleBot(${bot.id})" class="flex-1 ${bot.status === 'running' ? 'bg-red-600 hover:bg-red-700' : 'bg-green-600 hover:bg-green-700'} px-4 py-2 rounded-lg text-sm font-medium">
              ${bot.status === 'running' ? 'Parar' : 'Iniciar'}
            </button>
            <button onclick="viewBotLogs(${bot.id})" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg text-sm font-medium">Logs</button>
            <button onclick="deleteBot(${bot.id})" class="bg-red-800 hover:bg-red-900 px-4 py-2 rounded-lg text-sm font-medium">Excluir</button>
          </div>
        `;
        list.appendChild(card);
      });
    }

    window.toggleBot = (id) => {
      const bot = bots.find(b => b.id === id);
      bot.status = bot.status === 'running' ? 'stopped' : 'running';
      addLog(`Bot "${bot.name}" ${bot.status === 'running' ? 'iniciado' : 'parado'}.`);
      localStorage.setItem('magnata-bots', JSON.stringify(bots));
      loadBots();
      updateStats();
    };

    window.deleteBot = (id) => {
      if (!confirm('Excluir bot?')) return;
      const bot = bots.find(b => b.id === id);
      bots = bots.filter(b => b.id !== id);
      addLog(`Bot "${bot.name}" excluído.`);
      localStorage.setItem('magnata-bots', JSON.stringify(bots));
      loadBots();
      updateStats();
    };

    window.viewBotLogs = (id) => {
      showTab('logs');
      const bot = bots.find(b => b.id === id);
      const container = document.getElementById('logs-container');
      container.innerHTML = `<pre class="text-xs">${bot.logs.join('\n') || 'Sem logs.'}</pre>`;
    };

    // === LOGS ===
    function addLog(message) {
      const log = `[${new Date().toLocaleTimeString()}] ${message}`;
      logs.unshift(log);
      if (logs.length > 100) logs.pop();
      localStorage.setItem('magnata-logs', JSON.stringify(logs));
      if (document.getElementById('logs-tab').classList.contains('hidden') === false) loadLogs();
    }

    function loadLogs() {
      const container = document.getElementById('logs-container');
      container.innerHTML = logs.length ? logs.map(l => `<div class="log-entry text-green-400">${l}</div>`).join('') : '<p class="text-gray-400">Sem logs.</p>';
      container.scrollTop = 0;
    }

    // === PARTÍCULAS, PLAYER, ETC ===
    const canvas = document.getElementById('particles');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth; canvas.height = window.innerHeight;
    const particles = Array.from({ length: 100 }, () => ({ x: Math.random() * canvas.width, y: Math.random() * canvas.height, r: Math.random() * 1.5 + 0.5, s: Math.random() * 0.5 + 0.1 }));
    function draw() { ctx.clearRect(0,0,canvas.width,canvas.height); particles.forEach(p => { ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2); ctx.fillStyle = 'rgba(168,85,247,0.6)'; ctx.fill(); p.y -= p.s; if (p.y < 0) p.y = canvas.height; }); requestAnimationFrame(draw); }
    draw();

    function initAudio() {
      player = new YT.Player('youtube-player', {
        videoId: 'aToTwqMDlfU', playerVars: { autoplay: 1, loop: 1, playlist: 'aToTwqMDlfU', controls: 0 },
        events: { onReady: e => { e.target.setVolume(70); e.target.playVideo(); setInterval(updateProgress, 500); } }
      });
    }

    function updateProgress() {
      if (!player) return;
      const c = player.getCurrentTime(), d = player.getDuration();
      document.getElementById('current-time').textContent = `${Math.floor(c/60)}:${(Math.floor(c%60)+'').padStart(2,'0')}`;
      document.getElementById('duration').textContent = `${Math.floor(d/60)}:${(Math.floor(d%60)+'').padStart(2,'0')}`;
      document.getElementById('progress-fill').style.width = `${(c/d)*100}%`;
    }

    document.getElementById('play-pause-btn').onclick = () => player && (isPlaying ? player.pauseVideo() : player.playVideo());
    document.getElementById('progress-container').onclick = e => { const rect = e.currentTarget.getBoundingClientRect(); player.seekTo(player.getDuration() * ((e.clientX - rect.left) / rect.width)); };

    // === INÍCIO ===
    if (localStorage.getItem('magnata-loggedin') === 'true') {
      currentUser = JSON.parse(localStorage.getItem('magnata-currentuser'));
      initDashboard();
    }

    ['click', 'touchstart'].forEach(ev => document.body.addEventListener(ev, () => { userInteracted = true; initAudio(); }, { once: true }));
  </script>
</body>
</html>
